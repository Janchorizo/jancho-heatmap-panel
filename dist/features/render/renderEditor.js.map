{"version":3,"sources":["../../../src/features/render/renderEditor.ts"],"names":["renderEditor","scope","pathToTemplate","ctrl","panel","type","restrict","templateUrl","controller","RenderEditorController","d3","$scope","editor","panelCtrl","console","info","temp","render","colors","target","panelDivId","dir","baseMapRoute","mapRoute","xml","mimeType","get","error","div","document","getElementById","removeChild","childNodes","appendChild","documentElement","discrete_continuous","renderFeature","scaleColor","value","thresholds","scaleLinear","domain","range","log"],"mappings":"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","file":"renderEditor.js","sourcesContent":["import * as d3 from '../../libs/d3/build/d3.js' ;\n\nexport class RenderEditorController {\n  constructor( $scope) {\n    $scope.editor = this;\n    this.panelCtrl = $scope.ctrl;\n    this.panel = this.panelCtrl.panel;\n  }\n\n  hola(){\n    console.info('Qu√© pasa chavalada');\n  }\n\n  invertirColores(){\n    let temp = this.panel.render.colors[0];\n    this.panel.render.colors[0] = this.panel.render.colors[2];\n    this.panel.render.colors[2] = temp;\n    this.panelCtrl.render();\n  }\n\n  actualizarMapa(){\n    let target = this.panel.panelDivId;\n    let dir = this.panel.render.baseMapRoute + this.panel.render.mapRoute;\n\n    d3.xml( dir).mimeType( \"image/svg+xml\").get( function( error, xml){\n      if( error){ throw( error);}\n      let div = document.getElementById( target);\n      div.removeChild(div.childNodes[0]);\n      div.appendChild(xml.documentElement);\n    });\n    this.panelCtrl.render();\n  }\n\n  actualizarColores(){\n    if(this.panel.render.discrete_continuous == true){\n      this.panelCtrl.renderFeature.scaleColor = (function( value){\n        if( value <= this.panel.render.thresholds[0]){\n          return( this.panel.render.colors[0]);\n        }else if( value <= this.panel.render.thresholds[1]){\n          return( this.panel.render.colors[1]);\n        }else{\n          return( this.panel.render.colors[2]);\n        }\n      });\n    }else{\n      this.panelCtrl.renderFeature.scaleColor =  d3.scaleLinear()\n        .domain( this.panel.render.domain)\n        .range( this.panel.render.colors);\n    }\n    this.panelCtrl.render();\n  }\n\n  cambiarColor(){\n    console.log( 'Color cambiado para el plugin');\n    this.panelCtrl.render();\n  }\n}\n\nexport function renderEditor( scope){\n  'use strict';\n  let pathToTemplate = 'public/plugins/' + scope.ctrl.panel.type + '/features/render/renderEditor.html';\n  return function(){\n    return{\n      restrict: 'E',\n      scope: true,\n      templateUrl: pathToTemplate,//'public/plugins/jancho-heatmap-panel/features/render/renderEditor.html',\n      controller: RenderEditorController,\n    };\n  };\n}\n"]}